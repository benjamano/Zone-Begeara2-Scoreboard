import sys

try:
    import __init__ as init
except Exception as e:
    sys.exit(f"An error occured: {e}")    

try:
    init.start()
    
    print("\n|----------------------------------------------------------------------------------------------------|\n")
    
    #from waitress import serve
    
    import pyshark

    interfaces = pyshark.tshark.tshark.get_tshark_interfaces()

    for interface in interfaces:
        print(interface)

        
    import webApp as webApp
    import eventlet
    
    print("""
██╗░░░░░░█████╗░░██████╗███████╗██████╗░░░░░░░████████╗░█████╗░░██████╗░
██║░░░░░██╔══██╗██╔════╝██╔════╝██╔══██╗░░░░░░╚══██╔══╝██╔══██╗██╔════╝░
██║░░░░░███████║╚█████╗░█████╗░░██████╔╝█████╗░░░██║░░░███████║██║░░██╗░
██║░░░░░██╔══██║░╚═══██╗██╔══╝░░██╔══██╗╚════╝░░░██║░░░██╔══██║██║░░╚██╗
███████╗██║░░██║██████╔╝███████╗██║░░██║░░░░░░░░░██║░░░██║░░██║╚██████╔╝
╚══════╝╚═╝░░╚═╝╚═════╝░╚══════╝╚═╝░░╚═╝░░░░░░░░░╚═╝░░░╚═╝░░╚═╝░╚═════╝░

░██████╗░█████╗░░█████╗░██████╗░███████╗██████╗░░█████╗░░█████╗░██████╗░██████╗░
██╔════╝██╔══██╗██╔══██╗██╔══██╗██╔════╝██╔══██╗██╔══██╗██╔══██╗██╔══██╗██╔══██╗
╚█████╗░██║░░╚═╝██║░░██║██████╔╝█████╗░░██████╦╝██║░░██║███████║██████╔╝██║░░██║
░╚═══██╗██║░░██╗██║░░██║██╔══██╗██╔══╝░░██╔══██╗██║░░██║██╔══██║██╔══██╗██║░░██║
██████╔╝╚█████╔╝╚█████╔╝██║░░██║███████╗██████╦╝╚█████╔╝██║░░██║██║░░██║██████╔╝
╚═════╝░░╚════╝░░╚════╝░╚═╝░░╚═╝╚══════╝╚═════╝░░╚════╝░╚═╝░░╚═╝╚═╝░░╚═╝╚═════╝░

██████╗░██╗░░░██╗  ██████╗░███████╗███╗░░██╗  ███╗░░░███╗███████╗██████╗░░█████╗░███████╗██████╗░
██╔══██╗╚██╗░██╔╝  ██╔══██╗██╔════╝████╗░██║  ████╗░████║██╔════╝██╔══██╗██╔══██╗██╔════╝██╔══██╗
██████╦╝░╚████╔╝░  ██████╦╝█████╗░░██╔██╗██║  ██╔████╔██║█████╗░░██████╔╝██║░░╚═╝█████╗░░██████╔╝
██╔══██╗░░╚██╔╝░░  ██╔══██╗██╔══╝░░██║╚████║  ██║╚██╔╝██║██╔══╝░░██╔══██╗██║░░██╗██╔══╝░░██╔══██╗
██████╦╝░░░██║░░░  ██████╦╝███████╗██║░╚███║  ██║░╚═╝░██║███████╗██║░░██║╚█████╔╝███████╗██║░░██║
╚═════╝░░░░╚═╝░░░  ╚═════╝░╚══════╝╚═╝░░╚══╝  ╚═╝░░░░░╚═╝╚══════╝╚═╝░░╚═╝░╚════╝░╚══════╝╚═╝░░╚═╝""")
    
    print("\n|----------------------------------| STARTING WEB APP |----------------------------------------|\n")
    
    eventlet.wsgi.server(eventlet.listen(('0.0.0.0', 8080)), webApp.app)
    
    #webApp.socketio.run(webApp.app, host="0.0.0.0", port=8080)
    #serve(webApp.app, host="0.0.0.0", port=8080)
    #webApp.app.run(debug=False)
    
    
except Exception as e:
    sys.exit(f"An error occured: {e}")
